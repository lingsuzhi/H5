
<html>
<head>
    <meta charset="utf-8">

    <script src="../common/jquery.js"></script>
    <script src="layui/layui.all.js"></script>
    <link rel="stylesheet" href="layui/css/layui.css">
</head>
<body>
<div >
    <textarea style="width: 100%;height: 80%" id="content"></textarea>
    <div style="width: 100%; text-align: center; padding-top: 20px">
        <button class="layui-btn layui-btn-primary layui-btn   layui-btn-radius " type="button" id="okBtn">
            <i class="layui-icon">&#xe642;</i>
            确定
        </button>
        <button class="layui-btn layui-btn-primary  layui-btn-radius" type="button"id="cancelBtn">
            <i class="layui-icon">&#xe640;</i>
            取消
        </button>
    </div>
</div>
</body>
</html>

<script>
    $(function () {
        let cvs = parent.cvs;
        let obj = cvs.findFocus(cvs.objArr);
        if (obj && obj.data.text){
            $("#content").html(obj.data.text);
        }

        function closeWindow() {
            var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
            parent.layer.close(index); //再执行关闭
        };
        $("#cancelBtn").click(function(){
            closeWindow();
        });
        $("#okBtn").click(function(){
            if (obj && obj.data){
                obj.data.text = $("#content").val();
                cvs.refresh();
            }
            closeWindow();
        });
    })


</script>